CREATE TABLE Users(
	Id BIGINT PRIMARY KEY IDENTITY,
	Username VARCHAR(30) NOT NULL UNIQUE,
	[Password] VARCHAR(26) NOT NULL,
	ProfilePicture VARBINARY(MAX),
	LastLoginTime DATETIME,
	IsDeleted BIT
)

INSERT INTO Users (Username, [Password], ProfilePicture, LastLoginTime, IsDeleted)
VALUES
('Stamat', '123', NULL, CONVERT(DATETIME, '22-05-2018', 103), 0),
('Gosho', '1123523', NULL, CONVERT(DATETIME, '12-06-2018', 103), 0),
('Pesho', '132123', NULL, CONVERT(DATETIME, '01-01-2018', 103), 0),
('Vankata', '4312123', NULL, CONVERT(DATETIME, '24-02-2018', 103), 0),
('Kircata', '128763', NULL, CONVERT(DATETIME, '14-02-2018', 103), 0)

ALTER TABLE Users
ADD CONSTRAINT CHK_PrifilePicture CHECK (DATALENGTH(ProfilePicture) > 900 * 1024)

ALTER TABLE Users
DROP CONSTRAINT PK__Users__3214EC075125F02C

ALTER TABLE Users
ADD CONSTRAINT PK_Users PRIMARY KEY (Id, Username) 

ALTER TABLE Users
ADD DEFAULT GETDATE() FOR LastLoginTime

ALTER TABLE Users
DROP CONSTRAINT PK_Users

ALTER TABLE Users
ADD CONSTRAINT CHK_UsernameLength CHECK (LEN(Username) >= 3)